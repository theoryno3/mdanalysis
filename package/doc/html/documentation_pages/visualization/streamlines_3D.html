

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>9.1.2. 3D Streamplot &mdash; MDAnalysis 0.10.0-dev documentation</title>
    
    <link rel="stylesheet" href="../../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.10.0-dev',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within MDAnalysis 0.10.0-dev documentation"
          href="../../_static/opensearch.xml"/>
    <link rel="shortcut icon" href="../../_static/mdanalysis-logo.ico"/>
    <link rel="top" title="MDAnalysis 0.10.0-dev documentation" href="../../index.html" />
    <link rel="up" title="9. Visualization modules" href="../visualization_modules.html" />
    <link rel="next" title="10. MDAnalysis math library" href="../lib_modules.html" />
    <link rel="prev" title="9.1.1. 2D Streamplot" href="streamlines.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../lib_modules.html" title="10. MDAnalysis math library"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="streamlines.html" title="9.1.1. 2D Streamplot"
             accesskey="P">previous</a> |</li>
        <li><a href="../../index.html">MDAnalysis 0.10.0-dev documentation</a> &raquo;</li>
          <li><a href="../visualization_modules.html" accesskey="U">9. Visualization modules</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/mdanalysis-logo-200x150.png" alt="Logo"/>
            </a></p>
  <h4>Previous topic</h4>
  <p class="topless"><a href="streamlines.html"
                        title="previous chapter">9.1.1. 2D Streamplot</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../lib_modules.html"
                        title="next chapter">10. MDAnalysis math library</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../_sources/documentation_pages/visualization/streamlines_3D.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="d-streamplot">
<h1>9.1.2. 3D Streamplot<a class="headerlink" href="#d-streamplot" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div><span class="target" id="module-MDAnalysis.visualization.streamlines_3D"></span><div class="section" id="multicore-3d-streamplot-python-library-for-mdanalysis-mdanalysis-visualization-streamlines-3d">
<h2>9.1.2. Multicore 3D streamplot Python library for MDAnalysis &#8212; <a class="reference internal" href="#module-MDAnalysis.visualization.streamlines_3D" title="MDAnalysis.visualization.streamlines_3D"><tt class="xref py py-mod docutils literal"><span class="pre">MDAnalysis.visualization.streamlines_3D</span></tt></a><a class="headerlink" href="#multicore-3d-streamplot-python-library-for-mdanalysis-mdanalysis-visualization-streamlines-3d" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Authors:</th><td class="field-body">Tyler Reddy and Matthieu Chavent</td>
</tr>
<tr class="field-even field"><th class="field-name">Year:</th><td class="field-body">2014</td>
</tr>
<tr class="field-odd field"><th class="field-name">Copyright:</th><td class="field-body">GNU Public License v3</td>
</tr>
<tr class="field-even field"><th class="field-name">Citation:</th><td class="field-body"><a class="reference internal" href="streamlines.html#chavent2014">[Chavent2014]</a></td>
</tr>
</tbody>
</table>
<dl class="function">
<dt id="MDAnalysis.visualization.streamlines_3D.generate_streamlines_3d">
<tt class="descclassname">MDAnalysis.visualization.streamlines_3D.</tt><tt class="descname">generate_streamlines_3d</tt><big>(</big><em>coordinate_file_path</em>, <em>trajectory_file_path</em>, <em>grid_spacing</em>, <em>MDA_selection</em>, <em>start_frame</em>, <em>end_frame</em>, <em>xmin</em>, <em>xmax</em>, <em>ymin</em>, <em>ymax</em>, <em>zmin</em>, <em>zmax</em>, <em>maximum_delta_magnitude=2.0</em>, <em>num_cores='maximum'</em><big>)</big><a class="reference internal" href="../../_modules/MDAnalysis/visualization/streamlines_3D.html#generate_streamlines_3d"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#MDAnalysis.visualization.streamlines_3D.generate_streamlines_3d" title="Permalink to this definition">¶</a></dt>
<dd><p>Produce the x, y and z components of a 3D streamplot data set.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters :</th><td class="field-body"><dl class="first docutils">
<dt><strong>coordinate_file_path</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">Absolute path to the coordinate file</p>
</dd>
<dt><strong>trajectory_file_path</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">Absolute path to the trajectory file. It will normally be desirable to filter the trajectory with a tool
such as GROMACS g_filter (see <a class="reference internal" href="streamlines.html#chavent2014">[Chavent2014]</a>)</p>
</dd>
<dt><strong>grid_spacing</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">The spacing between grid lines (angstroms)</p>
</dd>
<dt><strong>MDA_selection</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">MDAnalysis selection string</p>
</dd>
<dt><strong>start_frame</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">First frame number to parse</p>
</dd>
<dt><strong>end_frame</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Last frame number to parse</p>
</dd>
<dt><strong>xmin</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Minimum coordinate boundary for x-axis (angstroms)</p>
</dd>
<dt><strong>xmax</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Maximum coordinate boundary for x-axis (angstroms)</p>
</dd>
<dt><strong>ymin</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Minimum coordinate boundary for y-axis (angstroms)</p>
</dd>
<dt><strong>ymax</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Maximum coordinate boundary for y-axis (angstroms)</p>
</dd>
<dt><strong>zmin</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Minimum coordinate boundary for z-axis (angstroms)</p>
</dd>
<dt><strong>zmax</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Maximum coordinate boundary for z-axis (angstroms)</p>
</dd>
<dt><strong>maximum_delta_magnitude</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Absolute value of the largest displacement (in dx,dy, or dz) tolerated for the centroid of a group of
particles (angstroms; default: 2.0). Values above this displacement will not count in the streamplot (
treated as excessively large displacements crossing the periodic boundary)</p>
</dd>
<dt><strong>num_cores</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int, optional</span></dt>
<dd><p class="first last">The number of cores to use. (Default &#8216;maximum&#8217; uses all available cores)</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns :</th><td class="field-body"><dl class="first docutils">
<dt><strong>dx_array</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array of floats</span></dt>
<dd><p class="first last">An array object containing the displacements in the x direction</p>
</dd>
<dt><strong>dy_array</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array of floats</span></dt>
<dd><p class="first last">An array object containing the displacements in the y direction</p>
</dd>
<dt><strong>dz_array</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array of floats</span></dt>
<dd><p class="first last">An array object containing the displacements in the z direction</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Examples :</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">numpy</span>
<span class="kn">import</span> <span class="nn">MDAnalysis</span>
<span class="kn">import</span> <span class="nn">MDAnalysis.visualization.streamlines_3D</span>
<span class="kn">import</span> <span class="nn">mayavi</span><span class="o">,</span> <span class="nn">mayavi.mlab</span>

<span class="c">#assign coordinate system limits and grid spacing:</span>
<span class="n">x_lower</span><span class="p">,</span><span class="n">x_upper</span> <span class="o">=</span> <span class="o">-</span><span class="mf">8.73</span><span class="p">,</span> <span class="mf">1225.96</span>
<span class="n">y_lower</span><span class="p">,</span><span class="n">y_upper</span> <span class="o">=</span> <span class="o">-</span><span class="mf">12.58</span><span class="p">,</span> <span class="mf">1224.34</span>
<span class="n">z_lower</span><span class="p">,</span><span class="n">z_upper</span> <span class="o">=</span> <span class="o">-</span><span class="mi">300</span><span class="p">,</span> <span class="mi">300</span>
<span class="n">grid_spacing_value</span> <span class="o">=</span> <span class="mi">20</span>

<span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">z1</span> <span class="o">=</span> <span class="n">MDAnalysis</span><span class="o">.</span><span class="n">visualization</span><span class="o">.</span><span class="n">streamlines_3D</span><span class="o">.</span><span class="n">generate_streamlines_3d</span><span class="p">(</span><span class="s">&#39;testing.gro&#39;</span><span class="p">,</span>
<span class="s">&#39;testing_filtered.xtc&#39;</span><span class="p">,</span><span class="n">xmin</span><span class="o">=</span><span class="n">x_lower</span><span class="p">,</span><span class="n">xmax</span><span class="o">=</span><span class="n">x_upper</span><span class="p">,</span><span class="n">ymin</span><span class="o">=</span><span class="n">y_lower</span><span class="p">,</span><span class="n">ymax</span><span class="o">=</span><span class="n">y_upper</span><span class="p">,</span><span class="n">zmin</span><span class="o">=</span><span class="n">z_lower</span><span class="p">,</span><span class="n">zmax</span><span class="o">=</span><span class="n">z_upper</span><span class="p">,</span>
<span class="n">grid_spacing</span> <span class="o">=</span> <span class="n">grid_spacing_value</span><span class="p">,</span> <span class="n">MDA_selection</span> <span class="o">=</span> <span class="s">&#39;name PO4&#39;</span><span class="p">,</span><span class="n">start_frame</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">end_frame</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span><span class="n">num_cores</span><span class="o">=</span><span class="s">&#39;maximum&#39;</span><span class="p">)</span>
<span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">mgrid</span><span class="p">[</span><span class="n">x_lower</span><span class="p">:</span><span class="n">x_upper</span><span class="p">:</span><span class="n">x1</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="mi">1j</span><span class="p">,</span><span class="n">y_lower</span><span class="p">:</span><span class="n">y_upper</span><span class="p">:</span><span class="n">y1</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="mi">1j</span><span class="p">,</span><span class="n">z_lower</span><span class="p">:</span><span class="n">z_upper</span><span class="p">:</span><span class="n">z1</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span>
<span class="mi">2</span><span class="p">]</span><span class="o">*</span><span class="mi">1j</span><span class="p">]</span>

<span class="c">#plot with mayavi:</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">mayavi</span><span class="o">.</span><span class="n">mlab</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">bgcolor</span><span class="o">=</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span><span class="mf">1.0</span><span class="p">,</span><span class="mf">1.0</span><span class="p">),</span><span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">800</span><span class="p">,</span><span class="mi">800</span><span class="p">),</span><span class="n">fgcolor</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
<span class="k">for</span> <span class="n">z_value</span> <span class="ow">in</span> <span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">z_lower</span><span class="p">,</span><span class="n">z_upper</span><span class="p">,</span><span class="n">grid_spacing_value</span><span class="p">):</span>
    <span class="n">st</span> <span class="o">=</span> <span class="n">mayavi</span><span class="o">.</span><span class="n">mlab</span><span class="o">.</span><span class="n">flow</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">,</span><span class="n">x1</span><span class="p">,</span><span class="n">y1</span><span class="p">,</span><span class="n">z1</span><span class="p">,</span><span class="n">line_width</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">seedtype</span><span class="o">=</span><span class="s">&#39;plane&#39;</span><span class="p">,</span><span class="n">integration_direction</span><span class="o">=</span><span class="s">&#39;both&#39;</span><span class="p">)</span>
    <span class="n">st</span><span class="o">.</span><span class="n">streamline_type</span> <span class="o">=</span> <span class="s">&#39;tube&#39;</span>
    <span class="n">st</span><span class="o">.</span><span class="n">tube_filter</span><span class="o">.</span><span class="n">radius</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">st</span><span class="o">.</span><span class="n">seed</span><span class="o">.</span><span class="n">widget</span><span class="o">.</span><span class="n">origin</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">([</span> <span class="n">x_lower</span><span class="p">,</span>  <span class="n">y_upper</span><span class="p">,</span>   <span class="n">z_value</span><span class="p">])</span>
    <span class="n">st</span><span class="o">.</span><span class="n">seed</span><span class="o">.</span><span class="n">widget</span><span class="o">.</span><span class="n">point1</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">([</span> <span class="n">x_upper</span><span class="p">,</span> <span class="n">y_upper</span><span class="p">,</span>  <span class="n">z_value</span><span class="p">])</span>
    <span class="n">st</span><span class="o">.</span><span class="n">seed</span><span class="o">.</span><span class="n">widget</span><span class="o">.</span><span class="n">point2</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">([</span> <span class="n">x_lower</span><span class="p">,</span> <span class="n">y_lower</span><span class="p">,</span>  <span class="n">z_value</span><span class="p">])</span>
    <span class="n">st</span><span class="o">.</span><span class="n">seed</span><span class="o">.</span><span class="n">widget</span><span class="o">.</span><span class="n">resolution</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">x1</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">st</span><span class="o">.</span><span class="n">seed</span><span class="o">.</span><span class="n">widget</span><span class="o">.</span><span class="n">enabled</span> <span class="o">=</span> <span class="bp">False</span>
<span class="n">mayavi</span><span class="o">.</span><span class="n">mlab</span><span class="o">.</span><span class="n">axes</span><span class="p">(</span><span class="n">extent</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1200</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1200</span><span class="p">,</span><span class="o">-</span><span class="mi">300</span><span class="p">,</span><span class="mi">300</span><span class="p">])</span>
<span class="n">fig</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">z_plus_view</span><span class="p">()</span>
<span class="n">mayavi</span><span class="o">.</span><span class="n">mlab</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s">&#39;test_streamplot_3D.png&#39;</span><span class="p">)</span>
<span class="c">#more compelling examples can be produced for vesicles and other spherical systems</span>
</pre></div>
</div>
<img alt="../../_images/test_streamplot_3D.png" src="../../_images/test_streamplot_3D.png" />
</dd></dl>

</div>
</div></blockquote>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../lib_modules.html" title="10. MDAnalysis math library"
             >next</a> |</li>
        <li class="right" >
          <a href="streamlines.html" title="9.1.1. 2D Streamplot"
             >previous</a> |</li>
        <li><a href="../../index.html">MDAnalysis 0.10.0-dev documentation</a> &raquo;</li>
          <li><a href="../visualization_modules.html" >9. Visualization modules</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2005-2015, Naveen Michaud-Agrawal, Elizabeth J. Denning, Joshua Adelman,
    Christian Beckstein (logo), Alejandro Bernardin, Sébastien Buchoux,
    David Caplan, Matthieu Chavent, Xavier Deupi, Jan Domański, David L. Dotson
    Lennard van der Feltz, Philip Fowler, Joseph Goose, Richard J. Gowers, Lukas Grossar,
    Benjamin Hall, Joe Jordan, Jinju Lu, Robert McGibbon, Alex Nesterenko,
    Manuel Nuno Melo, Caio S. Souza, Danny Parton, Joshua L. Phillips, Tyler Reddy,
    Paul Rigor, Sean L. Seyler, Andy Somogyi, Lukas Stelzl, Zhuyi Xue,
    and Oliver Beckstein.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>